/*! 
 Build based on gin-vue-admin 
 Time : 1730113336000 */
import{s as e,a,o as t,c as l,e as o,b as s,w as r,g as i,t as u,D as m,j as p,E as n,k as d}from"./087AC4D233B64EB0index.js";import{E as c}from"./087AC4D233B64EB0dialog.js";import"./087AC4D233B64EB0overlay.js";import{a as B,E as v}from"./087AC4D233B64EB0form-item.js";/* empty css                     *//* empty css                          */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";import"./087AC4D233B64EB0scrollbar.js";/* empty css                      */import{E as C,a as f}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as D}from"./087AC4D233B64EB0popover.js";/* empty css                      */import{_ as E}from"./087AC4D233B64EB0warningBar.js";import{f as g}from"./087AC4D233B64EB0format.js";import{E as j}from"./087AC4D233B64EB0index25.js";import"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0index20.js";import"./087AC4D233B64EB0index22.js";import"./087AC4D233B64EB0token.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0date.js";const A=a=>e({url:"/customer/customer",method:"post",data:a}),b={class:"gva-table-box"},w={class:"gva-btn-list"},y={style:{"text-align":"right","margin-top":"8px"}},h={class:"gva-pagination"},_={class:"dialog-footer"},k=Object.assign({name:"Customer"},{__name:"customer",setup(k){const V=a({customerName:"",customerPhoneData:""}),x=a(1),z=a(0),I=a(10),U=a([]),N=e=>{I.value=e,S()},P=e=>{x.value=e,S()},S=async()=>{const a=await(t={page:x.value,pageSize:I.value},e({url:"/customer/customerList",method:"get",params:t}));var t;0===a.code&&(U.value=a.data.list,z.value=a.data.total,x.value=a.data.page,I.value=a.data.pageSize)};S();const O=a(!1),q=a(""),L=async a=>{const t=await(l={ID:a.ID},e({url:"/customer/customer",method:"get",params:l}));var l;q.value="update",0===t.code&&(V.value=t.data.customer,O.value=!0)},T=()=>{O.value=!1,V.value={customerName:"",customerPhoneData:""}},F=async a=>{a.visible=!1;var t;0===(await(t={ID:a.ID},e({url:"/customer/customer",method:"delete",data:t}))).code&&(p({type:"success",message:"删除成功"}),1===U.value.length&&x.value>1&&x.value--,S())},G=async()=>{let a;switch(q.value){case"create":default:a=await A(V.value);break;case"update":a=await(t=V.value,e({url:"/customer/customer",method:"put",data:t}))}var t;0===a.code&&(T(),S())},H=()=>{q.value="create",O.value=!0};return(e,a)=>{const p=n,A=C,k=D,S=f,q=j,J=d,K=B,M=v,Q=c;return t(),l("div",null,[o(E,{title:"在资源权限中将此角色的资源权限清空 或者不包含创建者的角色 即可屏蔽此客户资源的显示"}),s("div",b,[s("div",w,[o(p,{type:"primary",icon:"plus",onClick:H},{default:r((()=>a[3]||(a[3]=[i("新增")]))),_:1})]),o(S,{ref:"multipleTable",data:U.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID"},{default:r((()=>[o(A,{type:"selection",width:"55"}),o(A,{align:"left",label:"接入日期",width:"180"},{default:r((e=>[s("span",null,u(m(g)(e.row.CreatedAt)),1)])),_:1}),o(A,{align:"left",label:"姓名",prop:"customerName",width:"120"}),o(A,{align:"left",label:"电话",prop:"customerPhoneData",width:"120"}),o(A,{align:"left",label:"接入人ID",prop:"sysUserId",width:"120"}),o(A,{align:"left",label:"操作","min-width":"160"},{default:r((e=>[o(p,{type:"primary",link:"",icon:"edit",onClick:a=>L(e.row)},{default:r((()=>a[4]||(a[4]=[i("变更")]))),_:2},1032,["onClick"]),o(k,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:r((()=>[o(p,{type:"primary",link:"",icon:"delete",onClick:a=>e.row.visible=!0},{default:r((()=>a[7]||(a[7]=[i("删除")]))),_:2},1032,["onClick"])])),default:r((()=>[a[8]||(a[8]=s("p",null,"确定要删除吗？",-1)),s("div",y,[o(p,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:r((()=>a[5]||(a[5]=[i("取消")]))),_:2},1032,["onClick"]),o(p,{type:"primary",onClick:a=>F(e.row)},{default:r((()=>a[6]||(a[6]=[i("确定")]))),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),s("div",h,[o(q,{"current-page":x.value,"page-size":I.value,"page-sizes":[10,30,50,100],total:z.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:P,onSizeChange:N},null,8,["current-page","page-size","total"])])]),o(Q,{modelValue:O.value,"onUpdate:modelValue":a[2]||(a[2]=e=>O.value=e),"before-close":T,title:"客户"},{footer:r((()=>[s("div",_,[o(p,{onClick:T},{default:r((()=>a[9]||(a[9]=[i("取 消")]))),_:1}),o(p,{type:"primary",onClick:G},{default:r((()=>a[10]||(a[10]=[i("确 定")]))),_:1})])])),default:r((()=>[o(M,{inline:!0,model:V.value,"label-width":"80px"},{default:r((()=>[o(K,{label:"客户名"},{default:r((()=>[o(J,{modelValue:V.value.customerName,"onUpdate:modelValue":a[0]||(a[0]=e=>V.value.customerName=e),autocomplete:"off"},null,8,["modelValue"])])),_:1}),o(K,{label:"客户电话"},{default:r((()=>[o(J,{modelValue:V.value.customerPhoneData,"onUpdate:modelValue":a[1]||(a[1]=e=>V.value.customerPhoneData=e),autocomplete:"off"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}});export{k as default};
