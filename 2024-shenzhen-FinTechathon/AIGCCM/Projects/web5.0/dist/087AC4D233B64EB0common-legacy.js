/*! 
 Build based on gin-vue-admin 
 Time : 1730113336000 */
System.register(["./087AC4D233B64EB0index-legacy.js","./087AC4D233B64EB0upload-legacy2.js","./087AC4D233B64EB0progress-legacy.js","./087AC4D233B64EB0button-legacy.js","./087AC4D233B64EB0image-legacy.js","./087AC4D233B64EB0image.vue_vue_type_style_index_0_scoped_4d6462c8_lang-legacy.js","./087AC4D233B64EB0_plugin-vue_export-helper-legacy.js","./087AC4D233B64EB0index-legacy26.js"],(function(e,n){"use strict";var t,a,r,u,o,l,i,s,c,p,f,d,g,m,v;return{setters:[function(e){t=e.a,a=e.l,r=e.o,u=e.c,o=e.e,l=e.w,i=e.g,s=e.D,c=e.j,p=e.E},null,null,null,function(e){f=e.I,d=e.i,g=e.a},null,function(e){m=e._},function(e){v=e.E}],execute:function(){e("U",m(Object.assign({name:"UploadImage"},{__name:"image",props:{imageUrl:{type:String,default:""},fileSize:{type:Number,default:2048},maxWH:{type:Number,default:1920}},emits:["on-success"],setup:function(e,n){var d=n.emit,g=e,m=t("/api"),y=a(),_=function(e){var n="image/jpeg"===e.type,t="image/png"===e.type;if(!n&&!t)return c.error("上传头像图片只能是 jpg或png 格式!"),!1;var a=e.size/1024<g.fileSize;return a||new f(e,g.fileSize,g.maxWH).compress()},B=function(e){var n=e.data;n.file&&d("on-success",n.file.url)};return function(e,n){var t=p,a=v;return r(),u("div",null,[o(a,{action:"".concat(m.value,"/fileUploadAndDownload/upload"),headers:{"x-token":s(y).token},"show-file-list":!1,"on-success":B,"before-upload":_,multiple:!1},{default:l((function(){return[o(t,{type:"primary"},{default:l((function(){return n[0]||(n[0]=[i("压缩上传")])})),_:1})]})),_:1},8,["action","headers"])])}}}),[["__scopeId","data-v-4d6462c8"]])),e("_",Object.assign({name:"UploadCommon"},{__name:"common",emits:["on-success"],setup:function(e,n){var f=n.emit,m=t("/api"),y=a(),_=t(!1),B=function(e){_.value=!0;var n=e.size/1024/1024<.5,t=e.size/1024/1024<5,a=d(e.type),r=g(e.type),u=!0;return a||r||(c.error("上传图片只能是 jpg,png,svg,webp 格式, 上传视频只能是 mp4,webm 格式!"),_.value=!1,u=!1),!t&&a&&(c.error("上传视频大小不能超过 5MB"),_.value=!1,u=!1),!n&&r&&(c.error("未压缩的上传图片大小不能超过 500KB，请使用压缩上传"),_.value=!1,u=!1),console.log("upload file check result: ",u),u},j=function(e){var n=e.data;n.file&&f("on-success",n.file.url)},D=function(){c({type:"error",message:"上传失败"}),_.value=!1};return function(e,n){var t=p,a=v;return r(),u("div",null,[o(a,{action:"".concat(m.value,"/fileUploadAndDownload/upload"),"before-upload":B,headers:{"x-token":s(y).token},"on-error":D,"on-success":j,"show-file-list":!1,class:"upload-btn"},{default:l((function(){return[o(t,{type:"primary"},{default:l((function(){return n[0]||(n[0]=[i("普通上传")])})),_:1})]})),_:1},8,["action","headers"])])}}}))}}}));
