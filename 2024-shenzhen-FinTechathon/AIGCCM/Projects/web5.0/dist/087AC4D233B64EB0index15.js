/*! 
 Build based on gin-vue-admin 
 Time : 1730113336000 */
import{u as a,a as t,o as e,c as i,b as n,e as o,w as l,g as s,t as r,D as p,h as c,T as d,j as u,E as m}from"./087AC4D233B64EB0index.js";/* empty css                          */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";import"./087AC4D233B64EB0scrollbar.js";/* empty css                      */import{E as B,a as f}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       *//* empty css                      */import{f as C,h as g,r as y}from"./087AC4D233B64EB0autoCode.js";import{f as D}from"./087AC4D233B64EB0format.js";import{E}from"./087AC4D233B64EB0index22.js";import{E as A}from"./087AC4D233B64EB0index25.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0index20.js";import"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0token.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0date.js";const b={class:"gva-table-box"},j={class:"gva-btn-list"},w={class:"gva-pagination"},v=Object.assign({name:"AutoCodeAdmin"},{__name:"index",setup(v){const h=a(),x=t(1),k=t(0),_=t(10),T=t([]),z=a=>{_.value=a,I()},N=a=>{x.value=a,I()},I=async()=>{const a=await C({page:x.value,pageSize:_.value});0===a.code&&(T.value=a.data.list,k.value=a.data.total,x.value=a.data.page,_.value=a.data.pageSize)};I();const S=async(a,t)=>{t?d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{d.confirm("此操作将删除自动创建的文件和api（会删除表！！！）, 请继续确认！！！","会删除表",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await y({id:Number(a.ID),deleteTable:t})).code&&(u.success("回滚成功"),I())}))}))})):d.confirm("此操作将删除自动创建的文件和api, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await y({id:Number(a.ID),deleteTable:t})).code&&(u.success("回滚成功"),I())}))},O=a=>{a?h.push({name:"autoCodeEdit",params:{id:a.ID}}):h.push({name:"autoCode"})};return(a,t)=>{const C=m,y=B,v=E,h=f,q=A;return e(),i("div",null,[n("div",b,[n("div",j,[o(C,{type:"primary",icon:"plus",onClick:t[0]||(t[0]=a=>O(null))},{default:l((()=>t[1]||(t[1]=[s("新增")]))),_:1})]),o(h,{data:T.value},{default:l((()=>[o(y,{type:"selection",width:"55"}),o(y,{align:"left",label:"id",width:"60",prop:"ID"}),o(y,{align:"left",label:"日期",width:"180"},{default:l((a=>[s(r(p(D)(a.row.CreatedAt)),1)])),_:1}),o(y,{align:"left",label:"结构体名","min-width":"150",prop:"structName"}),o(y,{align:"left",label:"结构体描述","min-width":"150",prop:"structCNName"}),o(y,{align:"left",label:"表名称","min-width":"150",prop:"tableName"}),o(y,{align:"left",label:"回滚标记","min-width":"150",prop:"flag"},{default:l((a=>[a.row.flag?(e(),c(v,{key:0,type:"danger",effect:"dark"},{default:l((()=>t[2]||(t[2]=[s(" 已回滚 ")]))),_:1})):(e(),c(v,{key:1,type:"success",effect:"dark"},{default:l((()=>t[3]||(t[3]=[s(" 未回滚 ")]))),_:1}))])),_:1}),o(y,{align:"left",label:"操作","min-width":"240"},{default:l((a=>[n("div",null,[o(C,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>S(a.row,!0)},{default:l((()=>t[4]||(t[4]=[s("回滚(删表)")]))),_:2},1032,["disabled","onClick"]),o(C,{type:"primary",link:"",disabled:1===a.row.flag,onClick:t=>S(a.row,!1)},{default:l((()=>t[5]||(t[5]=[s("回滚(不删表)")]))),_:2},1032,["disabled","onClick"]),o(C,{type:"primary",link:"",onClick:t=>O(a.row)},{default:l((()=>t[6]||(t[6]=[s("复用")]))),_:2},1032,["onClick"]),o(C,{type:"primary",link:"",onClick:t=>(async a=>{d.confirm("此操作将删除本历史, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((async()=>{0===(await g({id:Number(a.ID)})).code&&(u.success("删除成功"),I())}))})(a.row)},{default:l((()=>t[7]||(t[7]=[s("删除")]))),_:2},1032,["onClick"])])])),_:1})])),_:1},8,["data"]),n("div",w,[o(q,{"current-page":x.value,"page-size":_.value,"page-sizes":[10,30,50,100],total:k.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:N,onSizeChange:z},null,8,["current-page","page-size","total"])])])])}}});export{v as default};
