/*! 
 Build based on gin-vue-admin 
 Time : 1730113336000 */
import{s as e,a,N as l,o as t,c as o,b as r,e as s,w as i,g as p,t as u,D as n,h as d,j as c,k as m,E as v,H as f}from"./087AC4D233B64EB0index.js";/* empty css                          */import"./087AC4D233B64EB0tag.js";import"./087AC4D233B64EB0select.js";import"./087AC4D233B64EB0scrollbar.js";/* empty css                      */import{E as B,a as g}from"./087AC4D233B64EB0table-column.js";import"./087AC4D233B64EB0checkbox.js";/* empty css                       */import{E as C}from"./087AC4D233B64EB0popover.js";import{a as y,E as h}from"./087AC4D233B64EB0form-item.js";/* empty css                      *//* empty css                     */import{f as b}from"./087AC4D233B64EB0format.js";import{E}from"./087AC4D233B64EB0index22.js";import{E as D}from"./087AC4D233B64EB0index25.js";import"./087AC4D233B64EB0_Uint8Array.js";import"./087AC4D233B64EB0isEqual.js";import"./087AC4D233B64EB0index20.js";import"./087AC4D233B64EB0index21.js";import"./087AC4D233B64EB0token.js";import"./087AC4D233B64EB0strings.js";import"./087AC4D233B64EB0castArray.js";import"./087AC4D233B64EB0debounce.js";import"./087AC4D233B64EB0_initCloneObject.js";import"./087AC4D233B64EB0dropdown.js";import"./087AC4D233B64EB0_baseClone.js";import"./087AC4D233B64EB0date.js";const j={class:"gva-search-box"},w={class:"gva-table-box"},_={class:"gva-btn-list"},A={style:{"text-align":"right","margin-top":"8px"}},k={class:"popover-box"},x={key:1},V={class:"popover-box"},O={key:1},S={style:{"text-align":"right","margin-top":"8px"}},R={class:"gva-pagination"},z=Object.assign({name:"SysOperationRecord"},{__name:"sysOperationRecord",setup(z){const U=a(1),I=a(0),N=a(10),q=a([]),H=a({}),J=()=>{H.value={}},L=()=>{U.value=1,N.value=10,""===H.value.status&&(H.value.status=null),F()},P=e=>{N.value=e,F()},T=e=>{U.value=e,F()},F=async()=>{const a=await(l={page:U.value,pageSize:N.value,...H.value},e({url:"/sysOperationRecord/getSysOperationRecordList",method:"get",params:l}));var l;0===a.code&&(q.value=a.data.list,I.value=a.data.total,U.value=a.data.page,N.value=a.data.pageSize)};F();const G=a(!1),K=a([]),M=e=>{K.value=e},Q=async()=>{const a=[];K.value&&K.value.forEach((e=>{a.push(e.ID)}));var l;0===(await(l={ids:a},e({url:"/sysOperationRecord/deleteSysOperationRecordByIds",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),q.value.length===a.length&&U.value>1&&U.value--,G.value=!1,F())},W=async a=>{a.visible=!1;var l;0===(await(l={ID:a.ID},e({url:"/sysOperationRecord/deleteSysOperationRecord",method:"delete",data:l}))).code&&(c({type:"success",message:"删除成功"}),1===q.value.length&&U.value>1&&U.value--,F())},X=e=>{try{return JSON.parse(e)}catch(a){return e}};return(e,a)=>{const c=m,z=y,F=v,Y=h,Z=C,$=B,ee=E,ae=l("warning"),le=f,te=g,oe=D;return t(),o("div",null,[r("div",j,[s(Y,{inline:!0,model:H.value},{default:i((()=>[s(z,{label:"请求方法"},{default:i((()=>[s(c,{modelValue:H.value.method,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value.method=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),s(z,{label:"请求路径"},{default:i((()=>[s(c,{modelValue:H.value.path,"onUpdate:modelValue":a[1]||(a[1]=e=>H.value.path=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),s(z,{label:"结果状态码"},{default:i((()=>[s(c,{modelValue:H.value.status,"onUpdate:modelValue":a[2]||(a[2]=e=>H.value.status=e),placeholder:"搜索条件"},null,8,["modelValue"])])),_:1}),s(z,null,{default:i((()=>[s(F,{type:"primary",icon:"search",onClick:L},{default:i((()=>a[6]||(a[6]=[p("查询")]))),_:1}),s(F,{icon:"refresh",onClick:J},{default:i((()=>a[7]||(a[7]=[p("重置")]))),_:1})])),_:1})])),_:1},8,["model"])]),r("div",w,[r("div",_,[s(Z,{modelValue:G.value,"onUpdate:modelValue":a[5]||(a[5]=e=>G.value=e),placement:"top",width:"160"},{reference:i((()=>[s(F,{icon:"delete",style:{"margin-left":"10px"},disabled:!K.value.length,onClick:a[4]||(a[4]=e=>G.value=!0)},{default:i((()=>a[10]||(a[10]=[p("删除")]))),_:1},8,["disabled"])])),default:i((()=>[a[11]||(a[11]=r("p",null,"确定要删除吗？",-1)),r("div",A,[s(F,{type:"primary",link:"",onClick:a[3]||(a[3]=e=>G.value=!1)},{default:i((()=>a[8]||(a[8]=[p("取消")]))),_:1}),s(F,{type:"primary",onClick:Q},{default:i((()=>a[9]||(a[9]=[p("确定")]))),_:1})])])),_:1},8,["modelValue"])]),s(te,{ref:"multipleTable",data:q.value,style:{width:"100%"},"tooltip-effect":"dark","row-key":"ID",onSelectionChange:M},{default:i((()=>[s($,{align:"left",type:"selection",width:"55"}),s($,{align:"left",label:"操作人",width:"140"},{default:i((e=>[r("div",null,u(e.row.user.userName)+"("+u(e.row.user.nickName)+")",1)])),_:1}),s($,{align:"left",label:"日期",width:"180"},{default:i((e=>[p(u(n(b)(e.row.CreatedAt)),1)])),_:1}),s($,{align:"left",label:"状态码",prop:"status",width:"120"},{default:i((e=>[r("div",null,[s(ee,{type:"success"},{default:i((()=>[p(u(e.row.status),1)])),_:2},1024)])])),_:1}),s($,{align:"left",label:"请求IP",prop:"ip",width:"120"}),s($,{align:"left",label:"请求方法",prop:"method",width:"120"}),s($,{align:"left",label:"请求路径",prop:"path",width:"240"}),s($,{align:"left",label:"请求",prop:"path",width:"80"},{default:i((e=>[r("div",null,[e.row.body?(t(),d(Z,{key:0,placement:"left-start",trigger:"click"},{reference:i((()=>[s(le,{style:{cursor:"pointer"}},{default:i((()=>[s(ae)])),_:1})])),default:i((()=>[r("div",k,[r("pre",null,u(X(e.row.body)),1)])])),_:2},1024)):(t(),o("span",x,"无"))])])),_:1}),s($,{align:"left",label:"响应",prop:"path",width:"80"},{default:i((e=>[r("div",null,[e.row.resp?(t(),d(Z,{key:0,placement:"left-start",trigger:"click"},{reference:i((()=>[s(le,{style:{cursor:"pointer"}},{default:i((()=>[s(ae)])),_:1})])),default:i((()=>[r("div",V,[r("pre",null,u(X(e.row.resp)),1)])])),_:2},1024)):(t(),o("span",O,"无"))])])),_:1}),s($,{align:"left",label:"操作"},{default:i((e=>[s(Z,{modelValue:e.row.visible,"onUpdate:modelValue":a=>e.row.visible=a,placement:"top",width:"160"},{reference:i((()=>[s(F,{icon:"delete",type:"primary",link:"",onClick:a=>e.row.visible=!0},{default:i((()=>a[14]||(a[14]=[p("删除")]))),_:2},1032,["onClick"])])),default:i((()=>[a[15]||(a[15]=r("p",null,"确定要删除吗？",-1)),r("div",S,[s(F,{type:"primary",link:"",onClick:a=>e.row.visible=!1},{default:i((()=>a[12]||(a[12]=[p("取消")]))),_:2},1032,["onClick"]),s(F,{type:"primary",onClick:a=>W(e.row)},{default:i((()=>a[13]||(a[13]=[p("确定")]))),_:2},1032,["onClick"])])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:1})])),_:1},8,["data"]),r("div",R,[s(oe,{"current-page":U.value,"page-size":N.value,"page-sizes":[10,30,50,100],total:I.value,layout:"total, sizes, prev, pager, next, jumper",onCurrentChange:T,onSizeChange:P},null,8,["current-page","page-size","total"])])])])}}});export{z as default};
