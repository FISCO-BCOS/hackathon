/*! 
 Build based on gin-vue-admin 
 Time : 1730113336000 */
import{a as e,l as s,o as a,c as o,e as t,w as r,g as n,D as l,j as i,E as p}from"./087AC4D233B64EB0index.js";/* empty css                       *//* empty css                        *//* empty css                      */import{I as u,i as c,a as m}from"./087AC4D233B64EB0image.js";import"./087AC4D233B64EB0image.vue_vue_type_style_index_0_scoped_4d6462c8_lang.js";import{_ as d}from"./087AC4D233B64EB0_plugin-vue_export-helper.js";import{E as f}from"./087AC4D233B64EB0index26.js";const g=d(Object.assign({name:"UploadImage"},{__name:"image",props:{imageUrl:{type:String,default:""},fileSize:{type:Number,default:2048},maxWH:{type:Number,default:1920}},emits:["on-success"],setup(c,{emit:m}){const d=m,g=c,_=e("/api"),B=s(),j=e=>{const s="image/jpeg"===e.type,a="image/png"===e.type;if(!s&&!a)return i.error("上传头像图片只能是 jpg或png 格式!"),!1;const o=e.size/1024<g.fileSize;if(!o){return new u(e,g.fileSize,g.maxWH).compress()}return o},v=e=>{const{data:s}=e;s.file&&d("on-success",s.file.url)};return(e,s)=>{const i=p,u=f;return a(),o("div",null,[t(u,{action:"".concat(_.value,"/fileUploadAndDownload/upload"),headers:{"x-token":l(B).token},"show-file-list":!1,"on-success":v,"before-upload":j,multiple:!1},{default:r((()=>[t(i,{type:"primary"},{default:r((()=>s[0]||(s[0]=[n("压缩上传")]))),_:1})])),_:1},8,["action","headers"])])}}}),[["__scopeId","data-v-4d6462c8"]]),_=Object.assign({name:"UploadCommon"},{__name:"common",emits:["on-success"],setup(u,{emit:d}){const g=d,_=e("/api"),B=s(),j=e(!1),v=e=>{j.value=!0;const s=e.size/1024/1024<.5,a=e.size/1024/1024<5,o=c(e.type),t=m(e.type);let r=!0;return o||t||(i.error("上传图片只能是 jpg,png,svg,webp 格式, 上传视频只能是 mp4,webm 格式!"),j.value=!1,r=!1),!a&&o&&(i.error("上传视频大小不能超过 5MB"),j.value=!1,r=!1),!s&&t&&(i.error("未压缩的上传图片大小不能超过 500KB，请使用压缩上传"),j.value=!1,r=!1),console.log("upload file check result: ",r),r},y=e=>{const{data:s}=e;s.file&&g("on-success",s.file.url)},D=()=>{i({type:"error",message:"上传失败"}),j.value=!1};return(e,s)=>{const i=p,u=f;return a(),o("div",null,[t(u,{action:"".concat(_.value,"/fileUploadAndDownload/upload"),"before-upload":v,headers:{"x-token":l(B).token},"on-error":D,"on-success":y,"show-file-list":!1,class:"upload-btn"},{default:r((()=>[t(i,{type:"primary"},{default:r((()=>s[0]||(s[0]=[n("普通上传")]))),_:1})])),_:1},8,["action","headers"])])}}});export{g as U,_};
