# 项目名：基于区块链的多层级信用卡风控系统

## 项目简介：

本项目以信用卡风控这一国家重大需求为应用对象，系统地分析解决信用卡在身份认证、风险评估和金融监管等方面的新挑战, 聚焦信用卡风控“证-估-管-用”全链条的运维管理问题，提出基于区块链的多层级信用卡风控系统平台。研究分布式多方数字身份认证机制,探索如何利用区块链技术构建去中心化运行的统一身份认证; 基于区块链群组划分的联邦学习方法，实现精准的还款能力预测; 构建信用分计算以及金融监管的智能合约,实现多元化分级金融监管；最终利用FISCO-BCOS底层平台搭建平台系统，实现以“链”管“卡”，“链上”风控。

## 项目背景：

习近平总书记在党的十九大报告中指出了建设智慧城市的重要战略地位:“**以城市群为主体构建大中小城市和小城镇协调发展的城镇格局**”。并且还指出：“**加强应用基础研究**,拓展实施国家重大科技项目,为建设科技强国、质量强国、航天强国、网络强国、交通强国、数字中国、智慧社会提供有力支撑**”。城市体系评价包括智慧经济、智慧运输业、智慧环境、智慧居民、智慧生活和智慧管理六个方面。智慧经济作为智慧城市体系评价的首位，可见经济的运营与发达程度直接决定了智慧城市的规模与评级。2020年中央全面深化改革委员会第十次会议上，就审议通过了人民银行、发展改革委等六部门联合印发的**《统筹监管金融基础设施工作方案》**，该方案被誉为是正式吹响了“**金融新基建**”的号角。在智慧经济与“金融新基建”的影响下势必会有一大批智慧金融产业蜂拥而至。其中最具有代表性的便是经历了疫情的冲击之后，我国加快了研究数字货币的步伐，几个数字货币应用试点的推动较为顺利，不久的将来会进入实际落地阶段。随着数字货币成为国家定向发展国策，持续推进金融行业对外开放，鼓励分享经济全面推进。支付作为金融改革关键环节，**依托信用卡为载体**，必将在未来创造一波又一波的财富浪潮。所以，**本产品以金融创新为视角，将信用卡作为研究对象，探索信用卡的发展前景优势和当下面临的挑战，并对此提出了解决方案**。

据报道，2021年我国全年的信用卡将累计发行11.36亿张。然而，在巨大信用卡发行量的背后却隐藏了不小的信用卡不良使用危机，如图1所示，**可以看出目前多数银行信用卡的不良使用率仍超**1.5%，这预示着信用卡风险控制面临着巨大挑战。

作为金融的核心，**智能风控是持牌消费金融公司降低坏账和不良的保障**。根据中研产业研究院《2020-2025年中国智慧金融行业发展态势与前景展望研究报告》显示：截至2020年，阿里、腾讯、华为、百度等为代表的一众科技公司抢占万亿级“新基建”市场，阿里云宣称，未来3年时间里，将注入新基建2000亿元，用于云操作系统、服务器、芯片、网络等重大核心技术研发攻坚和面向未来的数据中心建设。腾讯也不示弱，称未来5年投入新基建的资金达到5000亿元。百度也宣布未来十年将继续加大在人工智能、芯片、云计算、数据中心等领域的投入。在头部企业的资金与技术的支持下，数字技术与经济社会以前所未有的广度和深度交汇融合，通过新基建战略赋能，在金融领域，技术对金融服务的覆盖面、准入和方便性大大提高。但仍要看到，AI在应用层面也面临局限。拿历史预测未来时，会面临很强的限制，特别是受历史数据的限制，所以**如果纯用**AI解决金融问题，存在一定的风险。

## 项目目标

本项目以信用卡风控这一国家重大需求为应用对象，系统地分析解决信用卡在身份认证、风险评估和金融监管等方面的新挑战。研究分布式多方数字身份认证机制,探索如何利用区块链技术构建去中心化运行的统一身份认证;建立分层还款能力风险评估,研究实时精准的用户白名单筛选和还款能力预测方法; 构建异构多方一致性账本,实现多元化分级金融监管： 

(1) **分布式多方数字身份认证**，解决传统数字身份识别认证管理集中化、存证取证实时性差等问题, 构建去中心化运行的统一身份认证, 安全的存储个人和企业用户的身份信息，在保护隐私的情况下为用户、用户信息提供方、用户信息使用方提供身份标识和信息交互，实现数据的确权与授权、强隐私保护、开放的抗审查的自由数据交换。

(2) **分层还款能力风险评估**,目前不同银行机构间存在地理和数据隔离特性,用户信息无法协同共享, 不能综合多方银行机构信息进行用户还款能力评估,针对上述问题, 研究分层用户还款能力的评估措施,利用本地区域模型训练,全局评估模型聚合更新,实现实时精准的用户白名单筛选和还款能力预测。

(3) **多元化分级金融监管**，有效解决用户金融行为监管措施弱问题，利用节点账本自动化同步机制，保障各方异构账本的一致性,同时利用区块链防篡改优势提高账本的信服力，基于模糊层次分析法设计信用分计算合约，同时针对单一机械的监管措施,综合考虑用户征信及还款能力建立多元化分级的金融监管策略。

(4) **基于区块链的多层级信用卡风控系统实现**，设计研发平台中具体功能模块以及理论研究工作的实际部署验证。

## 方案

本项目在FISCO BCOS框架下，使用区块链技术解决信用卡风控管理问题。通过考虑利用区块链分布式多方数字身份认证机制对信用卡申请者进行统一身份认证, 利用区块链群组联邦学习机制对用户还款能力进行评估预测, 设计相应的信用分计算和分级监管合约, 实现用户异常行为的多元化分级金融监管，从而有效降低信用卡风控系统中的机械化风控管理问题。具体分为以下的架构功能: 

(1) 分布式多方数字身份认证机制  

基于分布式身份标识和可验证数字凭证的认证机制,构建了一套分布式多方数字身份认证方法,设计了确认身份可信性的智能合约, 实现了不同身份间数据交换的信息传递，形成了完整的身份认证流程; 

a.   分布式身份标识

WeIdentity是一套分布式多中心的技术解决方案，可实现实体对象之间安全的访问授权与数据交换。利用WeIdentity组件的分布式身份标识WeIdentity DID以及可验证数字凭证WeIdentity Credential模块，来实现信用卡发行机构（Issuer）、信用卡申请者（User）、凭证发行方（Verifier）之间安全的访问授权与数据交换。具体流程如下：

• 信用卡申请者请求用户代理在区块链上创建唯一的身份证明（WeID）。

• 信用卡申请者向信用卡的发行机构请求信用卡的发放。

• 信用卡发行机构验证信用卡申请者对WeID的所有权，核实其符合统一的证书发放要求后，使用WeID发行数字签名（Credential）至区块链上。

• 信用卡申请者根据自身情况和需求向不同的凭证发行机构发送凭证申请请求。

• 凭证发行方验证信用卡申请者对WeID的所有权，其次在链上验证数字签名的真实性。

总的来说, 以上流程，保证了数据以实体用户为中心，同时实体身份、确权、授权等操作在链上完成，可追溯，可验证，不可篡改。

b.   可验证数字凭证

WeIdentity合约层面的工作目标主要包括两部分：WeIdentity DID智能合约负责链上ID体系建立，具体包括生成DID（Distributed IDentity）、生成DID Document、DID在链上的读取与更新。WeIdentity Authority智能合约，负责进行联盟链权限管理，具体包括链上DID角色的定义、操作与权限的定义与控制。智能合约主要实现如下功能:

• 逻辑合约将角色和操作权限分别存储，对角色和权限分别设计增删改函数供外部调用。通过访问数据合约获得数据，对数据做逻辑处理，写回数据合约。主要由凭证发行机构读取信用卡申请者数据, 并对其身份进行判断从来决定用户是否可信，能否发放凭证。

• 数据合约专注于数据结构的定义、数据内容的存储和数据读写的直接接口。

• 权限合约判断访问者的角色，并基于判断结果确定不同操作的权限。将权限分为信用卡发行机构、信用卡申请者、凭证发行方，给予不同的操作权限。

• 存证合约确保不同的签名方的签名信息和额外信息存储互不干扰。凭证发行方可以调用增加记录接口为存证添加额外信息，并且可以通过调用createEvidence接口为同一个存证增加来自于不同签名方的签名。凭证发行方签名的Hash值在创建时就已确定且不可更改以保证安全性。

(2) 分层还款能力风控评估机制

主要分析其他银行机构用户的个人信息, 基于区块链进行银行区域群组划分,构建群组本地训练及链上聚合的多层级协同学习方法, 设计链上用于全局聚合的预编译智能合约保障聚合过程可信, 实现对不同银行机构下用户信息的风险协同预测评估; 此外,根据用户的历史信用度和其他银行的参考信用度评估出用户在申请银行机构最终信用度,同时利用智能合约进行用户白名单筛选。 

a. 分层群组协同评估学习

在区块链信用卡银行机构群组划分的联邦学习中有两种类型的群组: 本地训练群组和全局聚合群组，其中两个群组的关系如图4所示。由地理位置相近的银行机构组成的本地训练群组负责协调同一训练组内的设备完成训练任务。由于群组节点的性能相似，本地模型训练时间相差不大。因此，认为本地训练是同步的。对于每个训练组中的银行机构，首先通过智能合约从主区块链获取初始模型参数，然后进行局部本地训练。每组经过几轮局部训练，从银行机构聚合局部风险评估模型参数，每个节点的聚合权值为其信用值, 每个银行机构的用户信用值计算与其还款能力预测相关。

b. 全局聚合预编译合约设计

此外, 全局聚合群组由各个本地训练群组中多个算力资源强的领导者组成，其负责协调聚合本地训练参数。由于不同银行机构群组的异质性，我们采用同步全局更新来提高模型的泛化性能。同时通过预编译合约触发全局聚合，并生成一个新的全局模型放置在区块链上。其中, 预编译全局聚合合约涉及7个函数, 包括: RegisterNode(), QueryState(), QueryGlobalModel(), UploadLocalUpdate(), UploadCredit(), QueryAllUpdates(),  UploadLocalAggregation()。具体地, 预编译合约中的函数定义如下:

• RegisterNode(): 节点注册, 对区块链中的节点角色进行注册划分, 包括本地训练者和本地领导者。

• QueryState(): 状态查询, 获取当前节点的角色类型和当前全局的轮数。QueryGlobalModel(): 获取全局故障检测模型, 负责从区块链上获取全局更新模型以便进行新一轮的本地模型训练。

• UploadLocalUpdate(): 上传本地模型, 负责上传本地训练群组的模型参数至智能合约进行全局聚合。

• QueryAllUpdates(): 获取所有本地模型, 以便对训练者进行性能值评估。

• UploadLocalAggregation(): 获取本地聚合故障检测模型, 支撑训练者性能值评估。

(3) 多元化分级金融监管机制  

针对部分信用卡用户还款难、逾期时间长以及对不同层次用户风险行为的僵硬处理方式, 主要分析了各家银行以及对应的信用卡之间的矛盾,基于多群组架构构建多元化账本,设计相应的智能合约, 实现分级的金融风控管理。

a. 基于模糊层次分析的信用分计算

针对当前信用卡申请者的个人信息，设计相应的信用分计算智能合约, 并把相应的信用分通过智能合约的方式存储在区块链中，该合约设定了用户信用度阈值，合约信息对系统内任何服务提供组织都是可验证、可追溯且不可篡改的。其次，该模型根据用户的当前信用度和其他银行评估的还款信用度评估得出用户在信用卡申请银行机构的最终信用度。当用户信用度达到合约设定的信用度阈值时，用户即可被筛选出来，从而进入银行机构的信用卡白名单。具体地, 用户在单一银行机构的信用度是由当前信用度、历史信用度和推荐信用度组成的, 其中推荐信用度即为用户还款能力的评估值。

b. 多级金融监管合约设计

为了减少银行与信用卡用户之间的信用成本，并且方便银行根据每个信用卡用户的信用分数层级进行分级的监控管理，我们设计一份智能合约来进行统一操作。本智能合约设计激励用户使用信用卡消费和信用分增减的智能合约，在开发完Solidity合约之后，需将编译后的合约部署到FISCO BCOS底层平台。该系统包括两个角色：管理者和用户。管理者负责对信用分系统进行管理，用户获得信用分。该系统包括以下功能：创建信用分系统; 注册：用户注册信用卡，获得信用分; 转账、还款、捐款：用户对信用卡的消费影响信用分。

智能合约的具体思路为：通过管理者来创建一个信用分系统，管理者会获得controller合约的地址。用户将通过controller合约进行注册等操作。每个用户对应着金额、时间、信用分等属性。为了将信用分的提升更加合理化，我们增加了percent属性来区别还9900和还9000之间的细微差别。当percent达到100时，信用分增加。因为支出的频率和金额都可以影响信用分的增长，所以每次交易都会改变信用分，信用分上涨数额与金额直接挂钩。逾期还款对于信用分的增长会明显减弱，逾期之后，每多一天就会降低信用分。
