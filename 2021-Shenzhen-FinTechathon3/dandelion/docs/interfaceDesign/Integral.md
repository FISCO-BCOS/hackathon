# 同质化资产（代表视频价值的积分）



## addIntegral

#### 功能说明

* 为某地址增加一定数量的积分（仅测试时使用）

#### 接口说明

**入参**

| 参数   | 类型    | 说明           |
| ------ | ------- | -------------- |
| _owner | address | 某用户地址     |
| _value | uint256 | 增加积分的数量 |

**出参**

null



## getProportion

#### 功能说明

* 根据地址获区某平台的积分分成比例

#### 接口说明

**入参**

| 参数    | 类型    | 说明       |
| ------- | ------- | ---------- |
| account | address | 某平台地址 |

**出参**

| 参数   | 类型  | 说明                   |
| ------ | ----- | ---------------------- |
| result | uint8 | 该平台平台方的分成比例 |

**出参示例：**

```json
{
    “5”
}
```

###  

## getAllProportion

#### 功能说明

* 获取所有平台的积分分成比例

#### 接口说明

**入参**

null

**出参**

| 参数   | 类型     | 说明               |
| ------ | -------- | ------------------ |
| result | string[] | 所有平台的分成比例 |

**出参示例：**

```json
{
    ["0x047defbf62853e83de7c55fa51f7a6c71ce111e0",5],
    ["0xf29256a18f4d83e11b0e80f69692f645ea4ddbb6",4]
}
```

######  **出参解析**

| **分隔符**                                     | **^,^**          |
| ---------------------------------------------- | ---------------- |
| **0x047defbf62853e83de7c55fa51f7a6c71ce111e0** | 平台的地址       |
| **5**                                          | 平台方的分成比例 |



## **ProportionChange**

#### **功能说明**

* **改变本平台的积分分成比例**

#### **接口说明**

**入参**

| **参数**      | **类型**  | **说明**               |
| ------------- | --------- | ---------------------- |
| **_platform** | **uint8** | **平台自己的分成比例** |

**出参**

null



## mint

#### **功能说明**

* **生成积分（仅视频播放会调用此方法生成积分，无法自行调用）**

#### **接口说明**

**入参**

| **参数**             | **类型**    | **说明**                                               |
| -------------------- | ----------- | ------------------------------------------------------ |
| **authorReceiver**   | **address** | **视频的拥有者的地址**                                 |
| **platformReceiver** | **address** | **拥有该视频的平台方地址**                             |
| **operator**         | **address** | **播放该视频的平台方地址**                             |
| **amount**           | **uint256** | **播放次数（仅测试时使用，不输入该值时是默认一次的）** |

**出参**

null



## balance

#### **功能说明**

* **根据地址获得某地址的积分数量**

#### **接口说明**

**入参**

| **参数**   | **类型**    | **说明**       |
| ---------- | ----------- | -------------- |
| **_owner** | **address** | **该用户地址** |

**出参**

| **参数**    | **类型**    | **说明**             |
| ----------- | ----------- | -------------------- |
| **balance** | **uint256** | **该地址下积分数量** |

**出参示例：**

```json
{
    “996”
}
```

### **** 

## transfer

#### **功能说明**

* **用户将自己手中的积分交易给广告商（会判定接受者是否是广告方，阻止用户之间交易）**

#### **接口说明**

**入参**

| **参数**     | **类型**    | **说明**       |
| ------------ | ----------- | -------------- |
| **_to**      | **address** | **某用户地址** |
| _value       | uint256     | 交易的积分数量 |
| _advertiseId | string      | 广告的id       |

**出参**

| **参数**    | **类型** | **说明**             |
| ----------- | -------- | -------------------- |
| **success** | bool     | **此次转账是否成功** |

**出参示例：**

```json
{
    “true”
}
```

**交易回执：**

若收款方为非广告商

<img src="../picture/8.PNG" style="zoom:80%;" />

若收款方为正确广告商

<img src="../picture/9.PNG" style="zoom:80%;/" />



## destroy

#### 功能说明

* 销毁积分（广告商用他们手里的积分兑换成广告之后，这一部分积分会销毁掉）

#### 接口说明

**入参**

| 参数   | 类型    | 说明           |
| ------ | ------- | -------------- |
| _value | uint256 | 销毁积分的数量 |

**出参**

| 参数    | 类型 | 说明             |
| ------- | ---- | ---------------- |
| success | bool | 此次交易是否成功 |

**出参示例：**

```json
{
    “true”
}
```

**交易回执：**

 <div align=center><img src="./picture/7.PNG" style="zoom: 80%;float:center" /></div>

### **修饰函数**

**onlyAdvertise** 

​	**判断交易的发起者是否是广告位的拥有者，确认为true才可以执行后面的交易**



**onlyIssuer**

​	**判断交易的发起者是否是广告方的拥有者，确认为true才可执行后面的交易**
